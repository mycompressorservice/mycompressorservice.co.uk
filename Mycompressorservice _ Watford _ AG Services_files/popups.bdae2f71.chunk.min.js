(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[964],{14778:function(n,e,t){"use strict";t.r(e),t.d(e,{PopupUtilsSymbol:function(){return o.zC},PopupsLinkUtilsAPISymbol:function(){return o.wk},PopupsSymbol:function(){return o.r_},editor:function(){return w},editorPage:function(){return R},name:function(){return o.u2},page:function(){return S},site:function(){return L}});var o=t(23228),u=t(5096),r=t(55031),p=t(59032),i=t(31191),c=t(43757),a=t(61049),l=t(55048),d=t(51831),s=t(8562),f=t(24263),P=(0,c.ff)([f.xf,u.ZQ,(0,c.t6)(a.Wf,"popups"),l.QZ,(0,c.t6)(a.jC,o.u2),f.JR],(function(n,e,t,o,u,r){var c,a=n.initPage,l=[],f=[],P=null,g=Promise.resolve(),v=function(n){"Escape"===n.key&&m()},m=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,o,u;return(0,i.Jh)(this,(function(c){switch(c.label){case 0:return(n=C())?[4,r(n,n)]:[2];case 1:return o=c.sent(),u=o.getAllImplementersOf(p.j.PageWillUnmountHandler),[4,Promise.all(u.map((function(e){return e.pageWillUnmount({pageId:n,contextId:n})})))];case 2:return c.sent(),(0,d.i)(),h(n),(0,s.yF)(e)||e.removeEventListener("keydown",v),P&&(P(),P=null),f.length>0&&f.forEach((function(n){n&&n()})),t.update((function(n){return(0,i.pi)((0,i.pi)({},n),{pageWillLoadHandler:null,currentPopupId:void 0,pendingPopupId:void 0})})),[2]}}))}))},C=function(){return t.get()?t.get().currentPopupId:void 0},I=function(n){var e,t=o.getPageWrapperComponentId(n,n);return o.addComponentToDynamicStructure("POPUPS_ROOT",{componentType:"PopupRoot",components:[t],uiType:u.isResponsive?"Responsive":"Classic"},((e={})[t]={componentType:"PageMountUnmount",components:[n]},e))},h=function(n){var e=o.getPageWrapperComponentId(n,n);o.removeComponentFromDynamicStructure(e),o.removeComponentFromDynamicStructure("POPUPS_ROOT")},O=function(n,o){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return r=n,(null==(p=t.get())?void 0:p.currentPopupId)===r||(null==p?void 0:p.pendingPopupId)===r?[2]:(t.update((function(e){return(0,i.pi)((0,i.pi)({},e),{pendingPopupId:n})})),(0,d.U)(),[4,a({pageId:n,contextId:n})]);case 1:return u.sent(),o&&(P=o),l.length>0&&l.forEach((function(e){e&&e(n)})),(0,s.yF)(e)||e.addEventListener("keydown",v),[4,I(n)];case 2:return u.sent(),t.update((function(e){return(0,i.pi)((0,i.pi)({},e),{pageWillLoadHandler:m,currentPopupId:n})})),[2]}var r,p}))}))};return{isPopupPage:function(n){return u.popupPages[n]},openPopupPage:function(n,e){return void 0===e&&(e=null),g=g.then((function(){return O(n,e)}))},closePopupPage:m,registerToPopupEvent:function(n,t){switch(n){case"popupScroll":c=t;var o=e.document.getElementById("POPUPS_ROOT");o&&o.addEventListener("scroll",c);break;case"popupOpen":l.push(t);break;case"popupClose":f.push(t)}},getCurrentPopupId:C}})),g=(0,c.ff)([(0,c.t6)(a.Wf,"popups")],(function(n){return{appWillLoadPage:function(){var e=n.get();e&&e.pageWillLoadHandler&&e.pageWillLoadHandler()}}})),v=t(31428),m=t(19238),C=["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"],I=(0,c.ff)([o.r_,m.Iz],(function(n,e){return{handleClick:function(t){var o=t.getAttribute("data-popupid");if(o)return n.openPopupPage(o),!0;var u=e.getFullUrlWithoutQueryParams(),r=!!n.getCurrentPopupId(),p=t.getAttribute("href"),i=u===(p&&(0,v.Gw)(p)),c=t.getAttribute("data-anchor")||"",a=C.includes(c);return!(!r||!i&&!a)&&(n.closePopupPage(),!0)}}})),h=t(11552),O=(0,c.ff)([o.r_,h.G],(function(n,e){return{componentTypes:["PopupCloseIconButton"],componentWillMount:function(t){e.register(t.id,"onClick",n.closePopupPage)}}})),_=(0,c.ff)([(0,c.t6)(a.$e,o.u2),o.r_,h.G],(function(n,e,t){var o=n.closeSiteButtons;return{componentTypes:["SiteButton"],componentWillMount:function(n){o[n.id]&&t.register(n.id,"onClick",e.closePopupPage)}}})),y=(0,c.ff)([(0,c.t6)(a.$e,o.u2),o.r_,h.G],(function(n,e,t){var o=n.popupsWithCloseOnOverlayClick;return{componentTypes:["PopupPage","ResponsivePopupPage"],componentWillMount:function(n){o[n.id]&&t.register(n.id,"onClick",e.closePopupPage)}}})),W=(0,c.ff)([(0,c.t6)(a.jC,o.u2),(0,c.t6)(a.Wf,o.u2)],(function(n,e){return{getPopupPages:function(){return n.popupPages},getCurrentOrPendingPopupId:function(){var n,t;return(null===(n=e.get())||void 0===n?void 0:n.currentPopupId)||(null===(t=e.get())||void 0===t?void 0:t.pendingPopupId)}}})),k=(0,c.ff)([(0,c.t6)(a.jC,o.u2),(0,c.t6)(a.Wf,o.u2)],(function(n,e){return{isPopupPage:function(e){return n.popupPages[e]},getCurrentPopupId:function(){var n;return null===(n=e.get())||void 0===n?void 0:n.currentPopupId}}})),T=(0,c.ff)([o.wk],(function(n){return{get platformEnvData(){return{popups:{popupPages:n.getPopupPages()}}}}})),b=t(65482),L=function(n){n(o.r_).to(P),n(u.nB).to(T),n(o.zC).to(k),n(o.wk).to(W),n(r.QV).to(I),n(p.j.AppWillLoadPageHandler).to(g)},S=function(n){n(b.Vx).to(O),n(b.Vx).to(_),n(b.Vx).to(y)},w=L,R=S}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/popups.bdae2f71.chunk.min.js.map